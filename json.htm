<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    input {
      font-size: 1em;
      width: 30%;
      max-width: 20em;
    }
  </style>
</head>

<body>
  <input type='text' id='url' style="width:90%;max-width:30em" onchange='geturl(this.value)'>
  <br />
  <input type='file' id='file' onchange='showfs(this.files)'>
  <pre id='result' style="overflow-x:scroll;"></pre>
</body>
<script>
  function setHTML(id, str) {
    e = document.getElementById(id);
    e && (e.innerHTML = str);
  }

  function setValue(id, str) {
    e = document.getElementById(id);
    e && (e.value = str);
  }

  function getValue(id) {
    e = document.getElementById(id);
    return e ? e.value : "";
  }



  function formatjson(s) {
    try {
      j = JSON.parse(s)
      return JSON.stringify(j, ' ', 2)
    } catch {
      return s
    }
  }

  // document.getElementById('file').onchange = 

  function showfs(fs) {
    var f = fs[0]
    show(f)
  }

  function show(f) {
    var reader = new FileReader();
    reader.onload = function () {
      setHTML("result", formatjson(arguments[0].target.result));
    }
    reader.readAsText(f, 'utf-8')
  }

  function fileondrop(event) {
    event.preventDefault();
    var files = event.dataTransfer.files;
    showfs(files);
  }

  document.ondragover = function (e) {
    e.preventDefault();
  };
  document.body.ondrop = fileondrop // document.ondrop = fileondrop


  function geturl(url) {
    var xhr = new XMLHttpRequest() || new ActiveXObject("Microsoft.XMLHTTP");

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4) {
        if ([200, 304].indexOf(xhr.status) > -1) {
          setHTML("result", formatjson(xhr.responseText))
        } else {
          setHTML("result", xhr.status + " " + xhr.statusText);
        }
      }
    }

    xhr.open("GET", url, true);
    setHTML("result", "loading");
    xhr.send()
  }

</script>

</html>